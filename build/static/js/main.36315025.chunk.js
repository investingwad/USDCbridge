(this["webpackJsonpusdc-stake"]=this["webpackJsonpusdc-stake"]||[]).push([[0],{364:function(e,t,n){},389:function(e,t){},393:function(e,t){},395:function(e,t){},404:function(e,t){},406:function(e,t){},499:function(e,t){},614:function(e,t){},619:function(e,t){},621:function(e,t){},628:function(e,t){},641:function(e,t){},736:function(e,t,n){"use strict";n.r(t);var a=n(3),i=n(0),s=n.n(i),r=n(149),o=n.n(r),u=(n(364),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,743)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),s(e),r(e)}))}),c=n(1),p=n.n(c),l=n(9),d=n(18),y=n(34),m=n(6),b=n(8),h=n(345),f=n(346),j=n.n(f),v=n(347),x=n.n(v),T=new(function(){function e(){Object(m.a)(this,e),this.accessContext=Object(h.initAccessContext)({appName:"bridge_app",network:{protocol:"https",host:"api.kylin.alohaeos.com",port:443,chainId:"5fff1dae8dc8e2fc4d5b23b2c7665c97f9e9d8edf2b6485a86ba311c25639191"},walletProviders:[j()(),x()(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15))]}),this.wallet=void 0}return Object(b.a)(e,[{key:"login",value:function(){var e=Object(l.a)(p.a.mark((function e(t){var n,a,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.accessContext.getWalletProviders(),a=n[t],i=this.accessContext.initWallet(a),this.wallet=i,e.next=6,i.connect();case 6:return e.next=8,i.login();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWallet",value:function(){return this.wallet}},{key:"disconnectWallet",value:function(){var e=Object(l.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.wallet){e.next=4;break}return e.next=3,this.wallet.terminate();case 3:this.wallet=void 0;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),O=function(e){return{type:"LOGIN",username:e.username}},g=n(217),k=n(24),w=n(48),_=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenSymbol",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!1,inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"allocateTo",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"src",type:"address"},{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],S="0x36423829Da60A46Ede371eFb4451787e8AFC2EBc",M=new g(g.givenProvider),N=w.b().shape({value:w.a().required("Enter value of token").test("lowAmount","Should be greater than 0",(function(e){return parseFloat(e)>0})),token:w.c().required("Select a token type")}),C={value:"",token:"USDC"},D=new M.eth.Contract(_,"0x0D9C8723B343A8368BebE0B5E89273fF8D712e3C"),E=new M.eth.Contract(_,"0xaD6D458402F60fD3Bd25163575031ACDce07538D"),A=new M.eth.Contract([{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Failure",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Receipt",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Refund",type:"event"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"acceptTokenOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"addGasSome",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_max_mint_period_amount",type:"uint256"},{internalType:"uint256",name:"_max_mint_period",type:"uint256"},{internalType:"uint256",name:"_max_mint_allowed",type:"uint256"},{internalType:"uint256",name:"_EOS_precision",type:"uint256"},{internalType:"uint256",name:"_ethereum_precision",type:"uint256"}],name:"addNewToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"addOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approvePoolBalance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"available_batch_id",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"available_message_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"",type:"uint64"}],name:"batches",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bytes",name:"message",type:"bytes"},{internalType:"uint256",name:"block_num",type:"uint256"},{internalType:"bool",name:"received",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"changeLockByOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimGas",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"configs",outputs:[{internalType:"uint256",name:"max_mint_allowed",type:"uint256"},{internalType:"uint256",name:"max_mint_period_amount",type:"uint256"},{internalType:"uint256",name:"max_mint_period",type:"uint256"},{internalType:"uint256",name:"EOS_precision",type:"uint256"},{internalType:"uint256",name:"ethereum_precision",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"depositors",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"executedMsg",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"gas_used",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"batch_id",type:"uint64"}],name:"getBatch",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"block_num",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"address",name:"",type:"address"}],name:"hasConfirmed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"inbound",outputs:[{internalType:"bytes",name:"message",type:"bytes"},{internalType:"uint256",name:"block_num",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"_owners",type:"address[]"},{internalType:"uint8",name:"_required",type:"uint8"},{internalType:"uint8",name:"_required_secure",type:"uint8"},{internalType:"address[]",name:"_token_contracts",type:"address[]"},{internalType:"uint256[]",name:"_EOS_precision",type:"uint256[]"},{internalType:"uint256[]",name:"_ethereum_precision",type:"uint256[]"},{internalType:"address",name:"_uniswapRouter",type:"address"},{internalType:"uint256[]",name:"_max_mint_period_amount",type:"uint256[]"},{internalType:"uint256[]",name:"_max_mint_period",type:"uint256[]"},{internalType:"uint256[]",name:"_max_mint_allowed",type:"uint256[]"},{internalType:"uint256",name:"_min_eth_required",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"last_incoming_batch_block_num",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"last_mint_time",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"last_outgoing_batch_block_num",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"locked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_eth_required",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address[]",name:"_owners",type:"address[]"},{internalType:"uint256",name:"required",type:"uint256"}],name:"modifyConsensus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msg_types",outputs:[{internalType:"uint64",name:"address_registered",type:"uint64"},{internalType:"uint64",name:"address_modified",type:"uint64"},{internalType:"uint64",name:"mint",type:"uint64"},{internalType:"uint64",name:"deposit",type:"uint64"},{internalType:"uint64",name:"lock",type:"uint64"},{internalType:"uint64",name:"max_mint",type:"uint64"},{internalType:"uint64",name:"min_eth",type:"uint64"},{internalType:"uint64",name:"low_eth",type:"uint64"},{internalType:"uint64",name:"eth_received",type:"uint64"},{internalType:"uint64",name:"swap",type:"uint64"},{internalType:"uint64",name:"max_mint_period_amount",type:"uint64"},{internalType:"uint64",name:"max_mint_period",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"next_incoming_batch_id",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"numOfConfirmed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"outbound",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bytes",name:"_message",type:"bytes"}],name:"pushInboundMessage",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"required_sigs",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"required_sigs_secure",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address payable",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"sendEther",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"sendToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokens",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"total_period_mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"total_tokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"uniswapRouter",outputs:[{internalType:"contract UniswapV2Router02",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],S),I=function(){var e=Object(i.useState)(""),t=Object(d.a)(e,2),n=t[0],s=t[1],r=Object(i.useState)(""),o=Object(d.a)(r,2),u=o[0],c=o[1],y=Object(i.useState)(!1),m=Object(d.a)(y,2),b=m[0],h=m[1],f=function(){var e=Object(l.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("inside send token"),c(!0),A.methods.sendToken(t,a).send({from:n}).on("transactionHash",(function(e){console.log("transactionHash  sendToken",e)})).on("receipt",(function(e){console.log("receipt sendToken",e),c(!1)})).on("confirmation",(function(e,t){console.log("confirmationNumber sendToken",e),console.log("receipt sendToken",t)})).on("error",(function(e){console.log("error sendToken",e),c(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(p.a.mark((function e(t,a,i){var s,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("inside approve and send token"),c(!0),s="USDC"===i?D:E,r="",r=b?"USDC"===i?M.utils.toWei("10000000000000000","mwei"):M.utils.toWei("10000000000000000","ether"):t,console.log("approved amount ",r),s.methods.approve(S,r).send({from:n}).on("transactionHash",(function(e){console.log("transactionHash approve ",e)})).on("receipt",(function(e){console.log("receipt approve",e)})).on("confirmation",(function(e,t){console.log("confirmationNumber approve",e),console.log("receipt approve",t)})).on("error",(function(e){console.log("error approve",e),c(!1)})).then((function(){A.methods.sendToken(t,a).send({from:n}).on("transactionHash",(function(e){console.log("transactionHash  sendToken",e)})).on("receipt",(function(e){console.log("receipt sendToken",e),c(!1)})).on("confirmation",(function(e,t){console.log("confirmationNumber sendToken",e),console.log("receipt sendToken",t)})).on("error",(function(e){console.log("error sendToken",e),c(!1)}))}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,n=t.ethereum,"0x3"!==n.chainId){e.next=11;break}if(!n){e.next=9;break}return e.next=7,n.request({method:"eth_requestAccounts"});case 7:a=e.sent,s(a[0]);case 9:e.next=12;break;case 11:alert("Please select Ropsten test network then connect");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("something went wrong ",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(p.a.mark((function e(t){var a,i,s,r,o,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("values ",t),n){e.next=4;break}return alert("Please connect to metamask first"),e.abrupt("return");case 4:return a=t.value,i=t.token,console.log("value ",a),s="USDC"===i?0:1,r="USDC"===i?D:E,o="USDC"===i?M.utils.toWei(a,"mwei"):M.utils.toWei(a,"ether"),console.log("stakeAMount ",o),e.next=12,r.methods.allowance(n,S).call();case 12:u=e.sent,console.log("approvedAmount in contract ",u),u>o?f(o,s):j(o,s,i);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log("checked ",b),Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"2. Send Tokens Ethereum to EOS"}),Object(a.jsxs)("div",{className:"login",children:[Object(a.jsx)("button",{onClick:v,children:n?"Connected":"Connect to metamask"}),Object(a.jsx)("div",{className:"tokenform",children:Object(a.jsx)(k.d,{initialValues:C,validationSchema:N,onSubmit:x,children:Object(a.jsxs)(k.c,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(k.b,{name:"value",placeholder:"enter amount"})}),Object(a.jsx)("div",{children:Object(a.jsx)(k.a,{name:"value"})}),Object(a.jsx)("div",{children:Object(a.jsxs)(k.b,{as:"select",name:"token",children:[Object(a.jsx)("option",{value:"USDC",children:"USDC"}),Object(a.jsx)("option",{value:"DAI",children:"DAI"})]})}),Object(a.jsx)("div",{children:Object(a.jsx)(k.a,{name:"token"})}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:b,onChange:function(){return h(!b)},disabled:u}),Object(a.jsx)("span",{children:"Infinite Approval"})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",className:"submit-btn",disabled:u,children:u?"Sending Token":"Send Token"})})]})})})]}),Object(a.jsx)("a",{href:"https://docs.google.com/document/u/1/d/14K6_DT-pqmBsAd3tLoHD-SKhPO1WCFW7unMKTMzxKx4/edit?usp=sharing",target:"_blank",rel:"noreferrer",children:"Click here for help"})]})},q=function(e){var t=e.children,n=e.show;return console.log("propssssss----",e),Object(a.jsx)(a.Fragment,{children:n?Object(a.jsx)("div",{className:"modalcontainer",children:t}):null})},F=i.useState,W=function(e){var t=e.closeModal,n=e.toggleLogin,i=Object(y.b)(),s=F(!1),r=Object(d.a)(s,2),o=r[0],u=r[1],c=F(-1),m=Object(d.a)(c,2),b=m[0],h=m[1],f=function(){var e=Object(l.a)(p.a.mark((function e(a){var s,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(a),u(!0),e.next=5,T.login(a);case 5:r=T.getWallet(),i(O({username:null===r||void 0===r||null===(s=r.auth)||void 0===s?void 0:s.accountName})),n(!0),localStorage.setItem("walletType",a.toString()),console.log("wallet11-----",r),t(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("something went wrong ",e.t0);case 16:return e.prev=16,u(!1),h(-1),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[0,13,16,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("div",{children:["Connect wallet",Object(a.jsx)("div",{className:"closeBtn",onClick:t,children:Object(a.jsx)("p",{className:"close-text",children:"close"})})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){return f(0)},disabled:o,children:o&&0===b?"connecting":"Connect with scatter"})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){return f(1)},disabled:o,children:o&&1===b?"connecting":"Connect with Anchor"})})]})},B=n(719),U=w.b().shape({address:w.c().required("Enter ethereum address").test("ethereumaddress","Invalid ethereum address",(function(e){return B.isAddress(e)}))}),P={address:""},L=function(e){var t=Object(y.c)((function(e){return e.user.username})),n=Object(y.c)((function(e){return e.user.walletConnected})),s=Object(y.b)(),r=Object(i.useState)(!1),o=Object(d.a)(r,2),u=o[0],c=o[1],m=Object(i.useState)(!1),b=Object(d.a)(m,2),h=b[0],f=b[1],j=Object(i.useState)(""),v=Object(d.a)(j,2),x=v[0],O=v[1],g=Object(i.useState)(""),w=Object(d.a)(g,2),_=w[0],S=w[1],M=function(){var t=Object(l.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=16;break}if(t.prev=1,!T.getWallet()){t.next=9;break}return t.next=6,T.disconnectWallet();case 6:s({type:"LOGOUT"}),localStorage.clear(),e.toggleLogin(!1);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log("something went wrong ",t.t0);case 14:t.next=17;break;case 16:c(!0);case 17:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(){return t.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f(!0),1,n=T.getWallet(),a=t.address,console.log("address----",a),!n){e.next=13;break}return e.next=9,n.eosApi.transact({actions:[{account:"eosio.token",name:"transfer",authorization:[{actor:n.auth.accountName,permission:n.auth.permission}],data:{from:n.auth.accountName,to:"etheosmultok",quantity:"".concat(1..toFixed(4)," EOS"),memo:"registration fees"}},{account:"etheosmultok",name:"registereth",authorization:[{actor:n.auth.accountName,permission:n.auth.permission}],data:{account:n.auth.accountName,ethaddress:a}}]},{broadcast:!0,blocksBehind:3,expireSeconds:60});case 9:e.sent&&(f(!1),S("Transaction Success"),O("")),e.next=14;break;case 13:f(!1);case 14:e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("err----",e.t0),O(JSON.parse(JSON.parse(JSON.stringify(e.t0)).json.error.details[0].message).error.details[0].message.toString().split(":")[1]),f(!1);case 21:return e.prev=21,f(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,16,21,24]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"1. Register Ethereum Address on EOS"}),Object(a.jsxs)("div",{className:"login",children:[Object(a.jsx)("button",{className:"loginbtn",onClick:M,children:n?"Logout From ".concat(t):"Connect to Eos Wallet"}),Object(a.jsx)("div",{className:"register",children:Object(a.jsx)(k.d,{initialValues:P,validationSchema:U,onSubmit:N,children:Object(a.jsxs)(k.c,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(k.b,{name:"address",placeholder:"enter ethereum address"})}),Object(a.jsx)("div",{children:Object(a.jsx)(k.a,{name:"address",className:"error"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"note",children:"Note:- 1 EOS will be charged for registration fees."}),Object(a.jsx)("button",{type:"submit",className:"sendbtn",disabled:h,children:h?"registering":"Register"})]})]})})})]}),Object(a.jsx)("a",{href:"https://docs.google.com/document/d/1peh47G369IqMjHkA3FptsODB5kRNN0DBSc17GNvzX1Q/edit?usp=sharing",target:"_blank",rel:"noreferrer",children:"Click here for help"}),x?Object(a.jsx)("div",{className:"error",children:x}):Object(a.jsx)("div",{className:"success",children:_}),u?Object(a.jsx)(q,{show:u,children:Object(a.jsx)(W,{closeModal:function(){c(!1)},toggleLogin:e.toggleLogin})}):null]})})},R=n(56),G=n(356),H=n.n(G)()({httpEndpoint:"https://api.kylin.alohaeos.com"}),J=w.b().shape({value:w.a().required("Enter value of token").test("lowAmount","Should be greater than 0",(function(e){return parseInt(e)>0})),token:w.c().required("Select a token type")}),z={value:"",token:"6,EUSDC"},K=function(e){var t=Object(y.c)((function(e){return e.user.username})),n=Object(y.c)((function(e){return e.user.walletConnected})),s=Object(i.useState)([]),r=Object(d.a)(s,2),o=r[0],u=r[1],c=Object(i.useState)(["6,EUSDC"]),m=Object(d.a)(c,2),b=(m[0],m[1]),h=Object(i.useState)(!1),f=Object(d.a)(h,2),j=f[0],v=f[1],x=Object(i.useState)(""),O=Object(d.a)(x,2),g=O[0],w=O[1],_=Object(i.useState)(""),S=Object(d.a)(_,2),M=S[0],N=S[1],C=e.loggedIn,D=function(){var e=Object(l.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,H.getTableRows({code:"etheosmultok",scope:"etheosmultok",table:"acceptedsym1",json:"true"});case 3:return(n=e.sent).rows.length&&n.rows.map((function(e){t.push(e.dtoken.toString())})),console.log("tokesn----",t),b(t),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(p.a.mark((function e(t,n){var a,i,s,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],e.prev=1,!t.length){e.next=22;break}console.log("username----",n),i=Object(R.a)(t),e.prev=5,r=p.a.mark((function e(){var t,i,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.value,i={code:"etheosmultok",json:!0,limit:1e3,scope:t.split(",")[1],table:"available",table_key:n},e.next=4,fetch("https://api.kylin.alohaeos.com/v1/chain/get_table_rows",{method:"post",body:JSON.stringify(i)});case 4:return r=e.sent,e.next=7,r.json();case 7:o=e.sent,console.log("respose----",o),o.rows.length&&o.rows.map((function(e){e.account==n&&a.push(o.rows[0].balance)}));case 10:case"end":return e.stop()}}),e)})),i.s();case 8:if((s=i.n()).done){e.next=12;break}return e.delegateYield(r(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),i.e(e.t1);case 17:return e.prev=17,i.f(),e.finish(17);case 20:console.log("userbalance ---",a),u(a);case 22:e.next=28;break;case 24:e.prev=24,e.t2=e.catch(1),console.log("errr---",e.t2),u(a);case 28:case"end":return e.stop()}}),e,null,[[1,24],[5,14,17,20]])})));return function(t,n){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){D(),C&&function(){var e=Object(l.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:if(a=e.sent,!n||!a.length){e.next=6;break}return e.next=6,E(a,t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),C||u([])}),[C]);var A=function(){var e=Object(l.a)(p.a.mark((function e(t){var n,a,i,s,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,v(!0),n=t.value,a=t.token,!(i=T.getWallet())){e.next=12;break}return"4,DAPP"==a?(s="dappservices",r="ethdappdepo1"):(s="ddadlptoken1",r="etheosmultok"),e.next=8,i.eosApi.transact({actions:[{account:s,name:"transfer",authorization:[{actor:i.auth.accountName,permission:i.auth.permission}],data:{from:i.auth.accountName,to:r,quantity:"".concat(parseInt(n).toFixed(parseInt(a.split(",")[0]))," ").concat(a.split(",")[1]," "),memo:"Transfer ".concat(a.split(",")[1]," token")}}]},{broadcast:!0,blocksBehind:3,expireSeconds:60});case 8:e.sent&&(v(!1),N("Transaction Success"),w("")),e.next=13;break;case 12:v(!1);case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("error in treansferinng----",JSON.parse(JSON.stringify(e.t0))),w(e.t0.message),v(!1);case 20:return e.prev=20,v(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,15,20,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"3. Send Tokens EOS to Ethereum"}),Object(a.jsx)("div",{className:"login",children:Object(a.jsx)("div",{className:"register",children:Object(a.jsx)(k.d,{initialValues:z,validationSchema:J,onSubmit:A,children:Object(a.jsxs)(k.c,{children:[o.map((function(e){return Object(a.jsx)("div",{className:"userbalance",children:e})})),Object(a.jsx)("div",{children:Object(a.jsx)(k.b,{name:"value",placeholder:"enter amount"})}),Object(a.jsx)("div",{children:Object(a.jsx)(k.a,{name:"value",className:"error"})}),Object(a.jsx)("div",{children:Object(a.jsxs)(k.b,{as:"select",name:"token",children:[Object(a.jsx)("option",{value:"6,EUSDC",children:"EUSDC"}),Object(a.jsx)("option",{value:"6,DAI",children:"DAI"}),Object(a.jsx)("option",{value:"4,DAPP",children:"DAPP"})]})}),Object(a.jsx)("div",{children:Object(a.jsx)(k.a,{name:"token",className:"error"})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",className:"registerbtn",disabled:j,children:j?"Sending Token":"Send Token"})})]})})})}),g?Object(a.jsx)("div",{className:"error",children:g}):Object(a.jsx)("div",{className:"success",children:M})]})},V=i.useEffect,Q=i.useState;var X=function(){var e=Q(!1),t=Object(d.a)(e,2),n=t[0],i=t[1],s=function(e){i(e)},r=Object(y.b)();return V((function(){var e=function(){var e=Object(l.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.login(t);case 3:(n=T.getWallet())&&(r(O({username:null===n||void 0===n||null===(a=n.auth)||void 0===a?void 0:a.accountName})),s(!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("something went wrong ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t=localStorage.getItem("walletType");if(t){var n=parseInt(t);n>=0&&e(n)}}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)(L,{toggleLogin:s}),Object(a.jsx)(I,{}),Object(a.jsx)(K,{loggedIn:n})]})},Y=n(131),Z=n(21),$={walletConnected:!1,username:""},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(Z.a)(Object(Z.a)({},e),{},{walletConnected:!0,username:t.username});case"LOGOUT":return Object(Z.a)(Object(Z.a)({},e),{},{walletConnected:!1,username:""});default:return e}},te=Object(Y.b)({user:ee}),ne=Object(Y.c)(te);o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(y.a,{store:ne,children:Object(a.jsx)(X,{})})}),document.getElementById("root")),u()}},[[736,1,2]]]);
//# sourceMappingURL=main.36315025.chunk.js.map