(this["webpackJsonpusdc-stake"]=this["webpackJsonpusdc-stake"]||[]).push([[0],{364:function(e,t,n){},389:function(e,t){},393:function(e,t){},395:function(e,t){},404:function(e,t){},406:function(e,t){},499:function(e,t){},614:function(e,t){},619:function(e,t){},621:function(e,t){},628:function(e,t){},641:function(e,t){},736:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(0),r=n.n(s),c=n(149),i=n.n(c),o=(n(364),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,743)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))}),u=n(2),l=n.n(u),d=n(7),p=n(12),b=n(25),h=n(6),j=n(9),m=n(346),f=n(347),x=n.n(f),v=n(348),O=n.n(v),y="accounts",g="acceptedsym",k="configset",w="feesettings",S="dadusdbridge",T="dadusdtokens",N="eosio.token",C="https://api.main.alohaeos.com",E="https",A="node1.eosdsp.com",M=443,I="aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906",W="transfer",D="registereth",U="modethadress",F="setgasprice",H="setethprice",L="seteosprice",_="https://docs.google.com/document/u/1/d/14K6_DT-pqmBsAd3tLoHD-SKhPO1WCFW7unMKTMzxKx4/edit?usp=sharing",q="https://docs.google.com/document/d/1peh47G369IqMjHkA3FptsODB5kRNN0DBSc17GNvzX1Q/edit?usp=sharing",B=new(function(){function e(){Object(h.a)(this,e),this.accessContext=Object(m.initAccessContext)({appName:"bridge_app",network:{protocol:E,host:A,port:M,chainId:I},walletProviders:[x()(),O()(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15))]}),this.wallet=void 0}return Object(j.a)(e,[{key:"login",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.accessContext.getWalletProviders(),a=n[t],s=this.accessContext.initWallet(a),this.wallet=s,e.next=6,s.connect();case 6:return e.next=8,s.login();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWallet",value:function(){return this.wallet}},{key:"disconnectWallet",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.wallet){e.next=4;break}return e.next=3,this.wallet.terminate();case 3:this.wallet=void 0;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),P=function(e){return{type:"LOGIN",username:e.username}},G=n(218),z=n(22),R=n(37),V=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenSymbol",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!1,inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"allocateTo",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"src",type:"address"},{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],K="0x151982ebf8fbbb8979167b64b729f5f5c43562db",J=new G(G.givenProvider),Q=R.b().shape({value:R.a().required("Enter value of token").test("lowAmount","Should be greater than 0",(function(e){return parseFloat(e)>0})),token:R.c().required("Select a token type")}),X={value:"",token:"USDC"},Y=new J.eth.Contract(V,"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"),Z=new J.eth.Contract(V,"0x6b175474e89094c44da98b954eedeac495271d0f"),$=new J.eth.Contract([{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Failure",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Receipt",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Refund",type:"event"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bytes",name:"_message",type:"bytes"}],name:"pushInboundMessage",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive",payable:!0},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"sendToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimGas",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function",payable:!0}],K),ee=function(){Object(b.c)((function(e){return e.user.walletConnected}));var e=Object(b.c)((function(e){return e.address.address})),t=(Object(b.c)((function(e){return e.address.ethWalletConnected})),Object(s.useState)("")),n=Object(p.a)(t,2),r=n[0],c=n[1],i=Object(s.useState)(!1),o=Object(p.a)(i,2),u=o[0],h=o[1],j=Object(s.useState)(""),m=Object(p.a)(j,2),f=m[0],x=m[1],v=Object(s.useState)(""),O=Object(p.a)(v,2),y=O[0],g=O[1],k=Object(s.useState)(""),w=Object(p.a)(k,2),S=w[0],T=w[1],N=function(){var t=Object(d.a)(l.a.mark((function t(n,a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:$.methods.sendToken(n,a).send({from:e}).on("transactionHash",(function(e){console.log("transactionHash  sendToken",e)})).on("receipt",(function(e){console.log("receipt sendToken",e),c(!1),g(e.transactionHash)})).on("confirmation",(function(e,t){console.log("confirmationNumber sendToken",e),console.log("receipt sendToken",t)})).on("error",(function(e){console.log("error sendToken",e),c(!1),x(e.message)}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),C=function(){var t=Object(d.a)(l.a.mark((function t(n,a,s){var r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("inside approve and send token"),c(!0),r="USDC"===s?Y:Z,i="",i=u?"USDC"===s?J.utils.toWei("10000000000000000","mwei"):J.utils.toWei("10000000000000000","ether"):n,console.log("approved amount ",i),r.methods.approve(K,i).send({from:e}).on("transactionHash",(function(e){console.log("transactionHash approve ",e)})).on("receipt",(function(e){console.log("receipt approve",e),T(e.transactionHash)})).on("confirmation",(function(e,t){console.log("confirmationNumber approve",e),console.log("receipt approve",t)})).on("error",(function(e){console.log("error approve",e),c(!1),x(e.message)})).then((function(){$.methods.sendToken(n,a).send({from:e}).on("transactionHash",(function(e){console.log("transactionHash  sendToken",e)})).on("receipt",(function(e){console.log("receipt sendToken",e),c(!1),g(e.transactionHash)})).on("confirmation",(function(e,t){console.log("confirmationNumber sendToken",e),console.log("receipt sendToken",t)})).on("error",(function(e){console.log("error sendToken",e),c(!1),x(e.message)}))}));case 7:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),E=function(){var t=Object(d.a)(l.a.mark((function t(n){var a,s,r,c,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("values ",n),e){t.next=4;break}return alert("Please connect to metamask first"),t.abrupt("return");case 4:return a=n.value,s=n.token,console.log("value ",a),r="USDC"===s?0:1,c="USDC"===s?Y:Z,i="USDC"===s?J.utils.toWei(a,"mwei"):J.utils.toWei(a,"ether"),console.log("stakeAMount ",i),t.next=12,c.methods.allowance(e,K).call();case 12:o=t.sent,console.log("approvedAmount in contract ",o),o>i?N(i,r):C(i,r,s);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){f&&x(""),y&&g(""),S&&T("")};return console.log("checked ",u),Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"4. Send Tokens Ethereum to EOS"}),Object(a.jsx)("div",{className:"login",children:Object(a.jsx)("div",{className:"tokenform",children:Object(a.jsx)(z.d,{initialValues:X,validationSchema:Q,onSubmit:E,children:Object(a.jsxs)(z.c,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(z.b,{name:"value",placeholder:"enter amount"})}),Object(a.jsx)("div",{children:Object(a.jsx)(z.a,{name:"value"})}),Object(a.jsx)("div",{children:Object(a.jsxs)(z.b,{as:"select",name:"token",children:[Object(a.jsx)("option",{value:"USDC",children:"USDC"}),Object(a.jsx)("option",{value:"DAI",children:"DAI"})]})}),Object(a.jsx)("div",{children:Object(a.jsx)(z.a,{name:"token"})}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:u,onChange:function(){return h(!u)},disabled:r}),Object(a.jsx)("span",{children:"Infinite Approval"})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",className:"submit-btn",disabled:r,children:r?"Sending Token":"Send Token"})})]})})})}),Object(a.jsx)("a",{href:_,target:"_blank",rel:"noreferrer",children:"Click here for help"}),f?Object(a.jsxs)("div",{className:"errorMsg",children:[Object(a.jsx)("div",{className:"close",onClick:A,children:"x"}),Object(a.jsx)("div",{className:"errmsg",children:"Error"}),Object(a.jsx)("p",{className:"error",children:f})]}):y?Object(a.jsxs)("div",{className:"successMsg",children:[Object(a.jsx)("div",{className:"close",onClick:A,children:"x"}),Object(a.jsx)("div",{className:"msg",children:"Success"}),S?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{className:"para",children:["Check approved trx :",Object(a.jsx)("a",{href:"https://etherscan.io/tx/".concat(S),className:"link",children:S})]}),Object(a.jsxs)("p",{className:"para",children:["Check deposit trx :",Object(a.jsx)("a",{href:y,className:"link",children:y})]})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:"Check transaction :"}),Object(a.jsx)("a",{href:"https://etherscan.io/tx/".concat(y),className:"link",children:y})]})]}):null]})},te=function(e){var t=e.children,n=e.show;return Object(a.jsx)(a.Fragment,{children:n?Object(a.jsx)("div",{className:"modalcontainer",children:t}):null})},ne=s.useState,ae=function(e){var t=e.closeModal,n=e.toggleLogin,s=Object(b.b)(),r=ne(!1),c=Object(p.a)(r,2),i=c[0],o=c[1],u=ne(-1),h=Object(p.a)(u,2),j=h[0],m=h[1],f=function(){var e=Object(d.a)(l.a.mark((function e(a){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(a),o(!0),e.next=5,B.login(a);case 5:c=B.getWallet(),s(P({username:null===c||void 0===c||null===(r=c.auth)||void 0===r?void 0:r.accountName})),n(!0),localStorage.setItem("walletType",a.toString()),console.log("wallet11-----",c),t(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("something went wrong ",e.t0);case 16:return e.prev=16,o(!1),m(-1),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[0,13,16,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("div",{children:["Connect wallet",Object(a.jsx)("div",{className:"closeBtn",onClick:t,children:Object(a.jsx)("p",{className:"close-text",children:"close"})})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){return f(0)},disabled:i,children:i&&0===j?"connecting":"Connect with scatter"})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){return f(1)},disabled:i,children:i&&1===j?"connecting":"Connect with Anchor"})})]})},se=n(159),re=n.n(se),ce=n(733),ie=R.b().shape({newaddress:R.c().required("Enter new ethereum address").test("ethereumaddress","Invalid ethereum address",(function(e){return ce.isAddress(e)}))}),oe={newaddress:""},ue={httpEndpoint:C},le=re()(ue),de=function(e){var t=Object(b.c)((function(e){return e.user.username})),n=Object(b.c)((function(e){return e.user.walletConnected})),r=Object(b.c)((function(e){return e.address.ethWalletConnected})),c=Object(b.b)(),i=Object(s.useState)(!1),o=Object(p.a)(i,2),u=o[0],h=o[1],j=Object(s.useState)(!1),m=Object(p.a)(j,2),f=m[0],x=m[1],v=Object(s.useState)(!1),O=Object(p.a)(v,2),y=O[0],g=O[1],w=Object(s.useState)(!1),T=Object(p.a)(w,2),C=T[0],E=T[1],A=Object(s.useState)(!1),M=Object(p.a)(A,2),I=M[0],_=M[1],P=Object(s.useState)(!1),G=Object(p.a)(P,2),V=G[0],K=G[1],J=Object(s.useState)(""),Q=Object(p.a)(J,2),X=Q[0],Y=Q[1],Z=Object(s.useState)(""),$=Object(p.a)(Z,2),ee=$[0],ne=$[1],se=Object(s.useState)(""),re=Object(p.a)(se,2),ue=re[0],de=re[1],pe=Object(s.useState)(""),be=Object(p.a)(pe,2),he=be[0],je=be[1],me=Object(s.useState)(""),fe=Object(p.a)(me,2),xe=fe[0],ve=fe[1],Oe=Object(s.useState)(""),ye=Object(p.a)(Oe,2),ge=ye[0],ke=ye[1],we=Object(s.useState)(""),Se=Object(p.a)(we,2),Te=Se[0],Ne=Se[1],Ce=Object(s.useState)("0.0000 EOS"),Ee=Object(p.a)(Ce,2),Ae=Ee[0],Me=Ee[1],Ie=R.b().shape({address:R.c().required("Enter ethereum address").test("ethereumaddress","Invalid ethereum address",(function(e){return ce.isAddress(e)}))}),We={address:Te};Object(s.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.getTableRows({code:S,scope:S,table:k,json:"true"});case 2:if(!(t=e.sent).rows.length){e.next=8;break}return e.next=6,t.rows[0].registrationfee;case 6:n=e.sent,Me(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var De=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=16;break}if(t.prev=1,!B.getWallet()){t.next=9;break}return t.next=6,B.disconnectWallet();case 6:c({type:"LOGOUT"}),localStorage.clear(),e.toggleLogin(!1);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log("something went wrong ",t.t0);case 14:t.next=17;break;case 16:h(!0);case 17:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(){return t.apply(this,arguments)}}(),Ue=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,1,a=B.getWallet(),s=t.address,n){e.next=8;break}Y("Eos wallet is not connected"),e.next=21;break;case 8:if(r){e.next=12;break}Y("Ethereum wallet is not connected"),e.next=21;break;case 12:if(!a){e.next=20;break}return x(!0),e.next=16,a.eosApi.transact({actions:[{account:N,name:W,authorization:[{actor:a.auth.accountName,permission:a.auth.permission}],data:{from:a.auth.accountName,to:S,quantity:Ae,memo:"registration fees"}},{account:S,name:D,authorization:[{actor:a.auth.accountName,permission:a.auth.permission}],data:{account:a.auth.accountName,ethaddress:s}}]},{broadcast:!0,blocksBehind:3,expireSeconds:60});case 16:e.sent&&(x(!1),ke("Transaction Success"),Y("")),e.next=21;break;case 20:x(!1);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),Y(e.t0.message),x(!1);case 27:return e.prev=27,x(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,23,27,30]])})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=B.getWallet(),s=t.newaddress,n){e.next=7;break}ne("Eos wallet is not connected"),e.next=20;break;case 7:if(r){e.next=11;break}ne("Ethereum wallet is not connected"),e.next=20;break;case 11:if(!a){e.next=19;break}return g(!0),e.next=15,a.eosApi.transact({actions:[{account:N,name:W,authorization:[{actor:a.auth.accountName,permission:a.auth.permission}],data:{from:a.auth.accountName,to:S,quantity:Ae,memo:"modification fees"}},{account:S,name:U,authorization:[{actor:a.auth.accountName,permission:a.auth.permission}],data:{account:a.auth.accountName,newethaddress:s}}]},{broadcast:!0,blocksBehind:3,expireSeconds:60});case 15:e.sent&&(g(!1),de("Transaction Success"),ne("")),e.next=20;break;case 19:g(!1);case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),ne(e.t0.message),g(!1);case 26:return e.prev=26,g(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[0,22,26,29]])})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=B.getWallet(),n){e.next=6;break}je("Eos wallet is not connected"),e.next=16;break;case 6:if(r){e.next=10;break}je("Ethereum wallet is not connected"),e.next=16;break;case 10:if(!t){e.next=16;break}return E(!0),e.next=14,t.eosApi.transact({actions:[{account:S,name:F,authorization:[{actor:t.auth.accountName,permission:t.auth.permission}],data:{}}]},{broadcast:!0,blocksBehind:3,expireSeconds:60});case 14:e.sent&&(E(!1),ve("Transaction Success"),je(""));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),E(!1);case 21:return e.prev=21,E(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=B.getWallet(),n){e.next=6;break}je("Eos wallet is not connected"),e.next=16;break;case 6:if(r){e.next=10;break}je("Ethereum wallet is not connected"),e.next=16;break;case 10:if(!t){e.next=16;break}return _(!0),e.next=14,t.eosApi.transact({actions:[{account:S,name:H,authorization:[{actor:t.auth.accountName,permission:t.auth.permission}],data:{}}]},{broadcast:!0,blocksBehind:3,expireSeconds:60});case 14:e.sent&&(_(!1),ve("Transaction Success"),je(""));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),_(!1);case 21:return e.prev=21,_(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=B.getWallet(),n){e.next=6;break}je("Eos wallet is not connected"),e.next=16;break;case 6:if(r){e.next=10;break}je("Ethereum wallet is not connected"),e.next=16;break;case 10:if(!t){e.next=16;break}return K(!0),e.next=14,t.eosApi.transact({actions:[{account:S,name:L,authorization:[{actor:t.auth.accountName,permission:t.auth.permission}],data:{}}]},{broadcast:!0,blocksBehind:3,expireSeconds:60});case 14:e.sent&&(K(!1),ve("Transaction Success"),ne(""));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),K(!1);case 21:return e.prev=21,K(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,n=t.ethereum,"0x1"!==n.chainId){e.next=12;break}if(!n){e.next=10;break}return e.next=7,n.request({method:"eth_requestAccounts"});case 7:a=e.sent,Ne(a[0]),c({type:"ETHLOGIN",address:{address:a[0]}.address});case 10:e.next=13;break;case 12:alert("Please select Ethereum Main Network (Mainnet) then connect");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("something went wrong ",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"1. Register Ethereum Address on EOS"}),Object(a.jsxs)("div",{className:"login",children:[Object(a.jsx)("button",{className:"loginbtn",onClick:De,children:n?"Logout From ".concat(t):"Connect to Eos Wallet"}),Object(a.jsx)("button",{onClick:qe,children:Te?"Connected":"Connect to metamask"}),Object(a.jsx)("div",{className:"register",children:Object(a.jsx)(z.d,{initialValues:We,validationSchema:Ie,onSubmit:Ue,children:function(e){var t=e.setFieldValue;return Object(a.jsxs)(z.c,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(z.b,{name:"address",placeholder:"enter ethereum address",onClick:function(){return t("address",Te)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(z.a,{name:"address",className:"error"})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"note",children:["Note:- Current registration fee ",Ae," will be deducted from your account."]}),Object(a.jsx)("button",{type:"submit",className:"sendbtn",disabled:f,children:f?"registering":"Register"})]})]})}})})]}),Object(a.jsx)("a",{href:q,target:"_blank",rel:"noreferrer",children:"Click here for help"}),X?Object(a.jsx)("div",{className:"error",children:X}):Object(a.jsx)("div",{className:"success",children:ge}),u?Object(a.jsx)(te,{show:u,children:Object(a.jsx)(ae,{closeModal:function(){h(!1)},toggleLogin:e.toggleLogin})}):null]}),Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"2. Update Prices (Ethereum Gas, EOS, ETH) "}),Object(a.jsx)("div",{className:"login",children:Object(a.jsxs)("div",{className:"register",children:[Object(a.jsx)("button",{className:"pricebtn",disabled:C,onClick:He,children:C?"updating":"Update GAS Price"}),Object(a.jsx)("button",{className:"pricebtn",disabled:I,onClick:Le,children:I?"updating":"Update ETH Price"}),Object(a.jsx)("button",{className:"pricebtn",disabled:V,onClick:_e,children:V?"updating":"Update EOS Price"})]})}),he?Object(a.jsx)("div",{className:"error",children:he}):Object(a.jsx)("div",{className:"success",children:xe})]}),Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"3. Modify Ethereum Address on EOS"}),Object(a.jsx)("div",{className:"login",children:Object(a.jsx)("div",{className:"register",children:Object(a.jsx)(z.d,{initialValues:oe,validationSchema:ie,onSubmit:Fe,children:function(e){var t=e.setFieldValue;return Object(a.jsxs)(z.c,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(z.b,{name:"newaddress",placeholder:"enter new ethereum address",onClick:function(){return t("newaddress",Te)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(z.a,{name:"newaddress",className:"error"})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"note",children:["Note:- Current modification fee ",Ae," will be deducted from your account."]}),Object(a.jsx)("button",{type:"submit",className:"sendbtn",disabled:y,children:y?"updating":"Update Address"})]})]})}})})}),ee?Object(a.jsx)("div",{className:"error",children:ee}):Object(a.jsx)("div",{className:"success",children:ue})]})]})},pe=n(56),be={httpEndpoint:C},he=re()(be),je=R.b().shape({value:R.a().required("Enter value of token").test("lowAmount","Should be greater than 0",(function(e){return parseInt(e)>0})),token:R.c().required("Select a token type")}),me={value:"",token:"4,USDC"},fe=function(e){var t=Object(b.c)((function(e){return e.user.username})),n=Object(b.c)((function(e){return e.user.walletConnected})),r=Object(b.c)((function(e){return e.address.ethWalletConnected})),c=Object(s.useState)([]),i=Object(p.a)(c,2),o=i[0],u=i[1],h=Object(s.useState)(["4,USDC"]),j=Object(p.a)(h,2),m=(j[0],j[1]),f=Object(s.useState)(!1),x=Object(p.a)(f,2),v=x[0],O=x[1],k=Object(s.useState)(""),N=Object(p.a)(k,2),E=N[0],A=N[1],M=Object(s.useState)(""),I=Object(p.a)(M,2),D=I[0],U=I[1],F=Object(s.useState)("0.0000 USDC"),H=Object(p.a)(F,2),L=H[0],_=H[1],q=Object(s.useState)("0.0000 DAI"),P=Object(p.a)(q,2),G=P[0],R=P[1],V=e.loggedIn,K=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,he.getTableRows({code:S,scope:S,table:g,json:"true"});case 3:return(n=e.sent).rows.length&&n.rows.map((function(e){t.push(e.dtoken.toString())})),m(t),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,s,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],e.prev=1,!t.length){e.next=20;break}s=Object(pe.a)(t),e.prev=4,c=l.a.mark((function e(){var t,s,c,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.value,void 0,s={code:T,json:!0,limit:1e3,scope:n,table:y,table_key:n},e.next=6,fetch("".concat(C,"/v1/chain/get_table_rows"),{method:"post",body:JSON.stringify(s)});case 6:return c=e.sent,e.next=9,c.json();case 9:(i=e.sent).rows.length&&(o=i.rows.find((function(e){return e.balance.split(" ")[1]==t.split(",")[1]})),a.push(o.balance));case 11:case"end":return e.stop()}}),e)})),s.s();case 7:if((r=s.n()).done){e.next=11;break}return e.delegateYield(c(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),s.e(e.t1);case 16:return e.prev=16,s.f(),e.finish(16);case 19:u(a);case 20:e.next=25;break;case 22:e.prev=22,e.t2=e.catch(1),u(a);case 25:case"end":return e.stop()}}),e,null,[[1,22],[4,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.getTableRows({code:S,scope:"USDC",table:w,json:"true"});case 2:return t=e.sent,e.next=5,he.getTableRows({code:S,scope:"DAI",table:w,json:"true"});case 5:if(n=e.sent,!t.rows.length){e.next=11;break}return e.next=9,t.rows[0].minfeewithdraw;case 9:a=e.sent,_(a);case 11:if(!n.rows.length){e.next=16;break}return e.next=14,n.rows[0].minfeewithdraw;case 14:s=e.sent,R(s);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(s.useEffect)((function(){K(),V&&function(){var e=Object(d.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:if(a=e.sent,!n||!a.length){e.next=6;break}return e.next=6,J(a,t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),V||u([])}),[V]);var Q=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,s,c,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.value,s=t.token,c=B.getWallet(),n){e.next=7;break}A("Eos wallet is not connected"),e.next=22;break;case 7:if(r){e.next=11;break}A("Ethereum wallet is not connected"),e.next=22;break;case 11:if(!c){e.next=21;break}return O(!0),i=T,o=S,e.next=17,c.eosApi.transact({actions:[{account:i,name:W,authorization:[{actor:c.auth.accountName,permission:c.auth.permission}],data:{from:c.auth.accountName,to:o,quantity:"".concat(parseInt(a).toFixed(parseInt(s.split(",")[0]))," ").concat(s.split(",")[1]," "),memo:"Transfer ".concat(s.split(",")[1]," token")}}]},{broadcast:!0,blocksBehind:3,expireSeconds:60});case 17:e.sent&&(O(!1),U("Transaction Success"),A("")),e.next=22;break;case 21:O(!1);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),A(e.t0.message),O(!1);case 28:return e.prev=28,O(!1),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[0,24,28,31]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"5. Send Tokens EOS to Ethereum"}),Object(a.jsx)("div",{className:"login",children:Object(a.jsx)("div",{className:"register",children:Object(a.jsx)(z.d,{initialValues:me,validationSchema:je,onSubmit:Q,children:Object(a.jsxs)(z.c,{children:[o.map((function(e){return Object(a.jsx)("div",{className:"userbalance",children:e})})),Object(a.jsx)("div",{children:Object(a.jsx)(z.b,{name:"value",placeholder:"enter amount"})}),Object(a.jsx)("div",{children:Object(a.jsx)(z.a,{name:"value",className:"error"})}),Object(a.jsx)("div",{children:Object(a.jsxs)(z.b,{as:"select",name:"token",children:[Object(a.jsx)("option",{value:"6,USDC",children:"USDC"}),Object(a.jsx)("option",{value:"6,DAI",children:"DAI"})]})}),Object(a.jsx)("div",{children:Object(a.jsx)(z.a,{name:"token",className:"error"})}),Object(a.jsxs)("div",{className:"notefee",children:["Note: Current withdraw fee is ",L," and ",G," set"]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",className:"registerbtn",disabled:v,children:v?"Sending Token":"Send Token"})})]})})})}),E?Object(a.jsx)("div",{className:"error",children:E}):Object(a.jsx)("div",{className:"success",children:D})]})},xe=s.useEffect,ve=s.useState;var Oe=function(){var e=ve(!1),t=Object(p.a)(e,2),n=t[0],s=t[1],r=function(e){s(e)},c=Object(b.b)();return xe((function(){var e=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.login(t);case 3:(n=B.getWallet())&&(c(P({username:null===n||void 0===n||null===(a=n.auth)||void 0===a?void 0:a.accountName})),r(!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("something went wrong ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t=localStorage.getItem("walletType");if(t){var n=parseInt(t);n>=0&&e(n)}}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)(de,{toggleLogin:r}),Object(a.jsx)(ee,{}),Object(a.jsx)(fe,{loggedIn:n})]})},ye=n(131),ge=n(19),ke={ethWalletConnected:!1,address:""},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ETHLOGIN":return Object(ge.a)(Object(ge.a)({},e),{},{ethWalletConnected:!0,address:t.address});default:return e}},Se={walletConnected:!1,username:""},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(ge.a)(Object(ge.a)({},e),{},{walletConnected:!0,username:t.username});case"LOGOUT":return Object(ge.a)(Object(ge.a)({},e),{},{walletConnected:!1,username:""});default:return e}},Ne=Object(ye.b)({user:Te,address:we}),Ce=Object(ye.c)(Ne);i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(b.a,{store:Ce,children:Object(a.jsx)(Oe,{})})}),document.getElementById("root")),o()}},[[736,1,2]]]);
//# sourceMappingURL=main.8dc4fb2d.chunk.js.map