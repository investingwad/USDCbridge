(this["webpackJsonpusdc-stake"]=this["webpackJsonpusdc-stake"]||[]).push([[0],{364:function(e,t,n){},389:function(e,t){},393:function(e,t){},395:function(e,t){},404:function(e,t){},406:function(e,t){},499:function(e,t){},614:function(e,t){},619:function(e,t){},621:function(e,t){},628:function(e,t){},641:function(e,t){},736:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(0),s=n.n(i),r=n(149),o=n.n(r),c=(n(364),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,743)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),s(e),r(e)}))}),u=n(2),l=n.n(u),p=n(8),d=n(18),y=n(25),m=n(6),b=n(9),h=n(345),f=n(346),j=n.n(f),v=n(347),x=n.n(v),O=new(function(){function e(){Object(m.a)(this,e),this.accessContext=Object(h.initAccessContext)({appName:"bridge_app",network:{protocol:"https",host:"api.kylin.alohaeos.com",port:443,chainId:"5fff1dae8dc8e2fc4d5b23b2c7665c97f9e9d8edf2b6485a86ba311c25639191"},walletProviders:[j()(),x()(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15))]}),this.wallet=void 0}return Object(b.a)(e,[{key:"login",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var n,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.accessContext.getWalletProviders(),a=n[t],i=this.accessContext.initWallet(a),this.wallet=i,e.next=6,i.connect();case 6:return e.next=8,i.login();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWallet",value:function(){return this.wallet}},{key:"disconnectWallet",value:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.wallet){e.next=4;break}return e.next=3,this.wallet.terminate();case 3:this.wallet=void 0;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),T=function(e){return{type:"LOGIN",username:e.username}},g=n(217),w=n(22),k=n(37),_=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenSymbol",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!1,inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"allocateTo",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"src",type:"address"},{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],S="0xAf11176d5D03d8587CDaF884c2f800AaE82C9aD2",M=new g(g.givenProvider),N=k.b().shape({value:k.a().required("Enter value of token").test("lowAmount","Should be greater than 0",(function(e){return parseFloat(e)>0})),token:k.c().required("Select a token type")}),C={value:"",token:"USDC"},E=new M.eth.Contract(_,"0x0D9C8723B343A8368BebE0B5E89273fF8D712e3C"),D=new M.eth.Contract(_,"0xaD6D458402F60fD3Bd25163575031ACDce07538D"),A=new M.eth.Contract([{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Failure",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Receipt",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Refund",type:"event"},{inputs:[{internalType:"address[]",name:"_owners",type:"address[]"},{internalType:"uint256",name:"required",type:"uint256"},{internalType:"uint256",name:"required_secure",type:"uint256"}],name:"modifyConsensus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bytes",name:"_message",type:"bytes"}],name:"pushInboundMessage",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive",payable:!0},{inputs:[{internalType:"address[]",name:"_owners",type:"address[]"},{internalType:"uint8",name:"_required",type:"uint8"},{internalType:"uint8",name:"_required_secure",type:"uint8"},{internalType:"address[]",name:"_token_contracts",type:"address[]"},{internalType:"uint256[]",name:"_EOS_precision",type:"uint256[]"},{internalType:"uint256[]",name:"_ethereum_precision",type:"uint256[]"},{internalType:"address",name:"_uniswapRouter",type:"address"},{internalType:"uint256[]",name:"_max_mint_period_amount",type:"uint256[]"},{internalType:"uint256[]",name:"_max_mint_period",type:"uint256[]"},{internalType:"uint256[]",name:"_max_mint_allowed",type:"uint256[]"},{internalType:"uint256",name:"_min_eth_required",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"sendToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimGas",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function",payable:!0}],S),I=new M.eth.Contract([{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Failure",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Receipt",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Refund",type:"event"},{inputs:[],name:"acceptTokenOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"available_batch_id",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"available_message_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"",type:"uint64"}],name:"batches",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bytes",name:"message",type:"bytes"},{internalType:"uint256",name:"block_num",type:"uint256"},{internalType:"bool",name:"received",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"changeLockByOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimGas",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"configs",outputs:[{internalType:"uint256",name:"max_mint_allowed",type:"uint256"},{internalType:"uint256",name:"max_mint_period_amount",type:"uint256"},{internalType:"uint256",name:"max_mint_period",type:"uint256"},{internalType:"uint256",name:"EOS_precision",type:"uint256"},{internalType:"uint256",name:"ethereum_precision",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"eosToEth",outputs:[{internalType:"contract EosToEthTokenpeg",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"executedMsg",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"gas_used",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"batch_id",type:"uint64"}],name:"getBatch",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"block_num",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"address",name:"",type:"address"}],name:"hasConfirmed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"inbound",outputs:[{internalType:"bytes",name:"message",type:"bytes"},{internalType:"uint256",name:"block_num",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"_owners",type:"address[]"},{internalType:"uint8",name:"_required",type:"uint8"},{internalType:"uint8",name:"_required_secure",type:"uint8"},{internalType:"address",name:"_token_contract",type:"address"},{internalType:"address",name:"_uniswapRouter",type:"address"},{internalType:"address",name:"_eosToEth",type:"address"},{internalType:"uint256",name:"_EOS_precision",type:"uint256"},{internalType:"uint256",name:"_ethereum_precision",type:"uint256"},{internalType:"uint256",name:"_max_mint_period_amount",type:"uint256"},{internalType:"uint256",name:"_max_mint_period",type:"uint256"},{internalType:"uint256",name:"_max_mint_allowed",type:"uint256"},{internalType:"uint256",name:"_min_eth_required",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"last_incoming_batch_block_num",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"last_mint_time",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"last_outgoing_batch_block_num",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"locked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_mint_period",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_mint_period_amount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_eth_required",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address[]",name:"_owners",type:"address[]"},{internalType:"uint256",name:"required",type:"uint256"}],name:"modifyConsensus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msg_types",outputs:[{internalType:"uint64",name:"address_registered",type:"uint64"},{internalType:"uint64",name:"address_modified",type:"uint64"},{internalType:"uint64",name:"mint",type:"uint64"},{internalType:"uint64",name:"deposit",type:"uint64"},{internalType:"uint64",name:"lock",type:"uint64"},{internalType:"uint64",name:"max_mint",type:"uint64"},{internalType:"uint64",name:"min_eth",type:"uint64"},{internalType:"uint64",name:"low_eth",type:"uint64"},{internalType:"uint64",name:"eth_received",type:"uint64"},{internalType:"uint64",name:"swap",type:"uint64"},{internalType:"uint64",name:"max_mint_period_amount",type:"uint64"},{internalType:"uint64",name:"max_mint_period",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"next_incoming_batch_id",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"numOfConfirmed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"outbound",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bytes",name:"_message",type:"bytes"}],name:"pushInboundMessage",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"required_sigs",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"required_sigs_secure",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address payable",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"sendEther",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"sendToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token_contract",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"total_period_mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"uniswapRouter",outputs:[{internalType:"contract UniswapV2Router02",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],"0xA80bbbe16EfF95c94674D4DdD2410BF3365d5b14"),q=function(){Object(y.c)((function(e){return e.user.walletConnected}));var e=Object(y.c)((function(e){return e.address.address})),t=(Object(y.c)((function(e){return e.address.ethWalletConnected})),Object(i.useState)("")),n=Object(d.a)(t,2),s=n[0],r=n[1],o=Object(i.useState)(!1),c=Object(d.a)(o,2),u=c[0],m=c[1],b=function(){var t=Object(p.a)(l.a.mark((function t(n,a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("inside send token"),A.methods.sendToken(n,a).send({from:e}).on("transactionHash",(function(e){console.log("transactionHash  sendToken",e)})).on("receipt",(function(e){console.log("receipt sendToken",e),r(!1)})).on("confirmation",(function(e,t){console.log("confirmationNumber sendToken",e),console.log("receipt sendToken",t)})).on("error",(function(e){console.log("error sendToken",e),r(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),h=function(){var t=Object(p.a)(l.a.mark((function t(n,a,i){var s,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("inside approve and send token"),r(!0),s="USDC"===i?E:D,o="",o=u?"USDC"===i?M.utils.toWei("10000000000000000","mwei"):M.utils.toWei("10000000000000000","ether"):n,console.log("approved amount ",o),s.methods.approve(S,o).send({from:e}).on("transactionHash",(function(e){console.log("transactionHash approve ",e)})).on("receipt",(function(e){console.log("receipt approve",e)})).on("confirmation",(function(e,t){console.log("confirmationNumber approve",e),console.log("receipt approve",t)})).on("error",(function(e){console.log("error approve",e),r(!1)})).then((function(){A.methods.sendToken(n,a).send({from:e}).on("transactionHash",(function(e){console.log("transactionHash  sendToken",e)})).on("receipt",(function(e){console.log("receipt sendToken",e),r(!1)})).on("confirmation",(function(e,t){console.log("confirmationNumber sendToken",e),console.log("receipt sendToken",t)})).on("error",(function(e){console.log("error sendToken",e),r(!1)}))}));case 7:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),f=function(){var t=Object(p.a)(l.a.mark((function t(n){var a,i,s,o,c,u,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("values ",n),e){t.next=4;break}return alert("Please connect to metamask first"),t.abrupt("return");case 4:if(a=n.value,i=n.token,console.log("value ",a),"DAPP"!==i){t.next=12;break}s=(1e4*parseFloat(a)).toString(),r(!0),I.methods.sendToken(s).send({from:e}).on("transactionHash",(function(e){console.log("transactionHash  sendToken",e)})).on("receipt",(function(e){console.log("receipt sendToken",e),r(!1)})).on("confirmation",(function(e,t){console.log("confirmationNumber sendToken",e),console.log("receipt sendToken",t)})).on("error",(function(e){console.log("error sendToken",e),r(!1)})),t.next=21;break;case 12:return o="USDC"===i?0:1,c="USDC"===i?E:D,u="USDC"===i?M.utils.toWei(a,"mwei"):M.utils.toWei(a,"ether"),console.log("stakeAMount ",u),t.next=18,c.methods.allowance(e,S).call();case 18:p=t.sent,console.log("approvedAmount in contract ",p),p>u?b(u,o):h(u,o,i);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return console.log("checked ",u),Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"3. Send Tokens Ethereum to EOS"}),Object(a.jsx)("div",{className:"login",children:Object(a.jsx)("div",{className:"tokenform",children:Object(a.jsx)(w.d,{initialValues:C,validationSchema:N,onSubmit:f,children:Object(a.jsxs)(w.c,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(w.b,{name:"value",placeholder:"enter amount"})}),Object(a.jsx)("div",{children:Object(a.jsx)(w.a,{name:"value"})}),Object(a.jsx)("div",{children:Object(a.jsxs)(w.b,{as:"select",name:"token",children:[Object(a.jsx)("option",{value:"USDC",children:"USDC"}),Object(a.jsx)("option",{value:"DAI",children:"DAI"}),Object(a.jsx)("option",{value:"DAPP",children:"DAPP"})]})}),Object(a.jsx)("div",{children:Object(a.jsx)(w.a,{name:"token"})}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:u,onChange:function(){return m(!u)},disabled:s}),Object(a.jsx)("span",{children:"Infinite Approval"})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",className:"submit-btn",disabled:s,children:s?"Sending Token":"Send Token"})})]})})})}),Object(a.jsx)("a",{href:"https://docs.google.com/document/u/1/d/14K6_DT-pqmBsAd3tLoHD-SKhPO1WCFW7unMKTMzxKx4/edit?usp=sharing",target:"_blank",rel:"noreferrer",children:"Click here for help"})]})},F=function(e){var t=e.children,n=e.show;return console.log("propssssss----",e),Object(a.jsx)(a.Fragment,{children:n?Object(a.jsx)("div",{className:"modalcontainer",children:t}):null})},W=i.useState,P=function(e){var t=e.closeModal,n=e.toggleLogin,i=Object(y.b)(),s=W(!1),r=Object(d.a)(s,2),o=r[0],c=r[1],u=W(-1),m=Object(d.a)(u,2),b=m[0],h=m[1],f=function(){var e=Object(p.a)(l.a.mark((function e(a){var s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(a),c(!0),e.next=5,O.login(a);case 5:r=O.getWallet(),i(T({username:null===r||void 0===r||null===(s=r.auth)||void 0===s?void 0:s.accountName})),n(!0),localStorage.setItem("walletType",a.toString()),console.log("wallet11-----",r),t(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("something went wrong ",e.t0);case 16:return e.prev=16,c(!1),h(-1),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[0,13,16,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("div",{children:["Connect wallet",Object(a.jsx)("div",{className:"closeBtn",onClick:t,children:Object(a.jsx)("p",{className:"close-text",children:"close"})})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){return f(0)},disabled:o,children:o&&0===b?"connecting":"Connect with scatter"})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){return f(1)},disabled:o,children:o&&1===b?"connecting":"Connect with Anchor"})})]})},U=n(719),B=k.b().shape({newaddress:k.c().required("Enter new ethereum address").test("ethereumaddress","Invalid ethereum address",(function(e){return U.isAddress(e)}))}),L={newaddress:""},R=function(e){var t=Object(y.c)((function(e){return e.user.username})),n=Object(y.c)((function(e){return e.user.walletConnected})),s=Object(y.c)((function(e){return e.address.ethWalletConnected})),r=Object(y.b)(),o=Object(i.useState)(!1),c=Object(d.a)(o,2),u=c[0],m=c[1],b=Object(i.useState)(!1),h=Object(d.a)(b,2),f=h[0],j=h[1],v=Object(i.useState)(!1),x=Object(d.a)(v,2),T=x[0],g=x[1],_=Object(i.useState)(""),S=Object(d.a)(_,2),M=S[0],N=S[1],C=Object(i.useState)(""),E=Object(d.a)(C,2),D=E[0],A=E[1],I=Object(i.useState)(""),q=Object(d.a)(I,2),W=q[0],R=q[1],H=Object(i.useState)(""),G=Object(d.a)(H,2),z=G[0],V=G[1],J=Object(i.useState)(""),K=Object(d.a)(J,2),Q=K[0],X=K[1],Y=k.b().shape({address:k.c().required("Enter ethereum address").test("ethereumaddress","Invalid ethereum address",(function(e){return console.log("addddddddddd----",e),U.isAddress(e)}))}),Z={address:Q},$=function(){var t=Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=16;break}if(t.prev=1,!O.getWallet()){t.next=9;break}return t.next=6,O.disconnectWallet();case 6:r({type:"LOGOUT"}),localStorage.clear(),e.toggleLogin(!1);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log("something went wrong ",t.t0);case 14:t.next=17;break;case 16:m(!0);case 17:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(){return t.apply(this,arguments)}}(),ee=function(){var e=Object(p.a)(l.a.mark((function e(t){var a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j(!0),1,a=O.getWallet(),i=t.address,console.log("address----",t),n||N("Eos wallet is not connected"),s||N("Ethereum wallet is not connected"),!a){e.next=15;break}return e.next=11,a.eosApi.transact({actions:[{account:"eosio.token",name:"transfer",authorization:[{actor:a.auth.accountName,permission:a.auth.permission}],data:{from:a.auth.accountName,to:"etheosmultok",quantity:"".concat(1..toFixed(4)," EOS"),memo:"registration fees"}},{account:"etheosmultok",name:"registereth",authorization:[{actor:a.auth.accountName,permission:a.auth.permission}],data:{account:a.auth.accountName,ethaddress:i}}]},{broadcast:!0,blocksBehind:3,expireSeconds:60});case 11:e.sent&&(j(!1),V("Transaction Success"),N("")),e.next=16;break;case 15:j(!1);case 16:e.next=23;break;case 18:e.prev=18,e.t0=e.catch(0),console.log("err----",e.t0),N(e.t0.message),j(!1);case 23:return e.prev=23,j(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[0,18,23,26]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(p.a)(l.a.mark((function e(t){var a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,g(!0),1,a=O.getWallet(),i=t.newaddress,console.log("address----",i),n||A("Eos wallet is not connected"),s||A("Ethereum wallet is not connected"),!a){e.next=15;break}return e.next=11,a.eosApi.transact({actions:[{account:"eosio.token",name:"transfer",authorization:[{actor:a.auth.accountName,permission:a.auth.permission}],data:{from:a.auth.accountName,to:"etheosmultok",quantity:"".concat(1..toFixed(4)," EOS"),memo:"modification fees"}},{account:"etheosmultok",name:"modethadress",authorization:[{actor:a.auth.accountName,permission:a.auth.permission}],data:{account:a.auth.accountName,newethaddress:i}}]},{broadcast:!0,blocksBehind:3,expireSeconds:60});case 11:e.sent&&(g(!1),R("Transaction Success"),A("")),e.next=16;break;case 15:g(!1);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),A(e.t0.message),g(!1);case 22:return e.prev=22,g(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[0,18,22,25]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,n=t.ethereum,"0x3"!==n.chainId){e.next=12;break}if(!n){e.next=10;break}return e.next=7,n.request({method:"eth_requestAccounts"});case 7:a=e.sent,X(a[0]),r({type:"ETHLOGIN",address:{address:a[0]}.address});case 10:e.next=13;break;case 12:alert("Please select Ropsten test network then connect");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("something went wrong ",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"1. Register Ethereum Address on EOS"}),Object(a.jsxs)("div",{className:"login",children:[Object(a.jsx)("button",{className:"loginbtn",onClick:$,children:n?"Logout From ".concat(t):"Connect to Eos Wallet"}),Object(a.jsx)("button",{onClick:ne,children:Q?"Connected":"Connect to metamask"}),Object(a.jsx)("div",{className:"register",children:Object(a.jsx)(w.d,{initialValues:Z,validationSchema:Y,onSubmit:ee,children:function(e){var t=e.setFieldValue;return Object(a.jsxs)(w.c,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(w.b,{name:"address",placeholder:"enter ethereum address",onClick:function(){return t("address",Q)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(w.a,{name:"address",className:"error"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"note",children:"Note:- 1 EOS will be charged for registration fees."}),Object(a.jsx)("button",{type:"submit",className:"sendbtn",disabled:f,children:f?"registering":"Register"})]})]})}})})]}),Object(a.jsx)("a",{href:"https://docs.google.com/document/d/1peh47G369IqMjHkA3FptsODB5kRNN0DBSc17GNvzX1Q/edit?usp=sharing",target:"_blank",rel:"noreferrer",children:"Click here for help"}),M?Object(a.jsx)("div",{className:"error",children:M}):Object(a.jsx)("div",{className:"success",children:z}),u?Object(a.jsx)(F,{show:u,children:Object(a.jsx)(P,{closeModal:function(){m(!1)},toggleLogin:e.toggleLogin})}):null]}),Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"2. Modify Ethereum Address on EOS"}),Object(a.jsx)("div",{className:"login",children:Object(a.jsx)("div",{className:"register",children:Object(a.jsx)(w.d,{initialValues:L,validationSchema:B,onSubmit:te,children:function(e){var t=e.setFieldValue;return Object(a.jsxs)(w.c,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(w.b,{name:"newaddress",placeholder:"enter new ethereum address",onClick:function(){return t("newaddress",Q)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(w.a,{name:"newaddress",className:"error"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"note",children:"Note:- 1 EOS will be charged for modification fees."}),Object(a.jsx)("button",{type:"submit",className:"sendbtn",disabled:T,children:T?"updating":"Update Address"})]})]})}})})}),D?Object(a.jsx)("div",{className:"error",children:D}):Object(a.jsx)("div",{className:"success",children:W})]})]})},H=n(56),G=n(356),z=n.n(G)()({httpEndpoint:"https://api.kylin.alohaeos.com"}),V=k.b().shape({value:k.a().required("Enter value of token").test("lowAmount","Should be greater than 0",(function(e){return parseInt(e)>0})),token:k.c().required("Select a token type")}),J={value:"",token:"6,EUSDC"},K=function(e){var t=Object(y.c)((function(e){return e.user.username})),n=Object(y.c)((function(e){return e.user.walletConnected})),s=Object(y.c)((function(e){return e.address.ethWalletConnected})),r=Object(i.useState)([]),o=Object(d.a)(r,2),c=o[0],u=o[1],m=Object(i.useState)(["6,EUSDC"]),b=Object(d.a)(m,2),h=(b[0],b[1]),f=Object(i.useState)(!1),j=Object(d.a)(f,2),v=j[0],x=j[1],T=Object(i.useState)(""),g=Object(d.a)(T,2),k=g[0],_=g[1],S=Object(i.useState)(""),M=Object(d.a)(S,2),N=M[0],C=M[1],E=e.loggedIn,D=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,z.getTableRows({code:"etheosmultok",scope:"etheosmultok",table:"acceptedsym1",json:"true"});case 3:return(n=e.sent).rows.length&&n.rows.map((function(e){t.push(e.dtoken.toString())})),console.log("tokesn----",t),h(t),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(l.a.mark((function e(t,n){var a,i,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],e.prev=1,!t.length){e.next=22;break}console.log("username----",n),i=Object(H.a)(t),e.prev=5,r=l.a.mark((function e(){var t,i,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.value,i={code:"etheosmultok",json:!0,limit:1e3,scope:t.split(",")[1],table:"available",table_key:n},e.next=4,fetch("https://api.kylin.alohaeos.com/v1/chain/get_table_rows",{method:"post",body:JSON.stringify(i)});case 4:return r=e.sent,e.next=7,r.json();case 7:o=e.sent,console.log("respose----",o),o.rows.length&&o.rows.map((function(e){e.account==n&&a.push(o.rows[0].balance)}));case 10:case"end":return e.stop()}}),e)})),i.s();case 8:if((s=i.n()).done){e.next=12;break}return e.delegateYield(r(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),i.e(e.t1);case 17:return e.prev=17,i.f(),e.finish(17);case 20:console.log("userbalance ---",a),u(a);case 22:e.next=28;break;case 24:e.prev=24,e.t2=e.catch(1),console.log("errr---",e.t2),u(a);case 28:case"end":return e.stop()}}),e,null,[[1,24],[5,14,17,20]])})));return function(t,n){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){D(),E&&function(){var e=Object(p.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:if(a=e.sent,!n||!a.length){e.next=6;break}return e.next=6,A(a,t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),E||u([])}),[E]);var I=function(){var e=Object(p.a)(l.a.mark((function e(t){var a,i,r,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,x(!0),a=t.value,i=t.token,r=O.getWallet(),n||_("Eos wallet is not connected"),s||_("Ethereum wallet is not connected"),!r){e.next=14;break}return"4,DAPP"==i?(o="dappservices",c="ethdappdepo1"):(o="ddadlptoken1",c="etheosmultok"),e.next=10,r.eosApi.transact({actions:[{account:o,name:"transfer",authorization:[{actor:r.auth.accountName,permission:r.auth.permission}],data:{from:r.auth.accountName,to:c,quantity:"".concat(parseInt(a).toFixed(parseInt(i.split(",")[0]))," ").concat(i.split(",")[1]," "),memo:"Transfer ".concat(i.split(",")[1]," token")}}]},{broadcast:!0,blocksBehind:3,expireSeconds:60});case 10:e.sent&&(x(!1),C("Transaction Success"),_("")),e.next=15;break;case 14:x(!1);case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("error in treansferinng----",JSON.parse(JSON.stringify(e.t0))),_(e.t0.message),x(!1);case 22:return e.prev=22,x(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[0,17,22,25]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"4. Send Tokens EOS to Ethereum"}),Object(a.jsx)("div",{className:"login",children:Object(a.jsx)("div",{className:"register",children:Object(a.jsx)(w.d,{initialValues:J,validationSchema:V,onSubmit:I,children:Object(a.jsxs)(w.c,{children:[c.map((function(e){return Object(a.jsx)("div",{className:"userbalance",children:e})})),Object(a.jsx)("div",{children:Object(a.jsx)(w.b,{name:"value",placeholder:"enter amount"})}),Object(a.jsx)("div",{children:Object(a.jsx)(w.a,{name:"value",className:"error"})}),Object(a.jsx)("div",{children:Object(a.jsxs)(w.b,{as:"select",name:"token",children:[Object(a.jsx)("option",{value:"6,EUSDC",children:"EUSDC"}),Object(a.jsx)("option",{value:"6,DAI",children:"DAI"}),Object(a.jsx)("option",{value:"4,DAPP",children:"DAPP"})]})}),Object(a.jsx)("div",{children:Object(a.jsx)(w.a,{name:"token",className:"error"})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",className:"registerbtn",disabled:v,children:v?"Sending Token":"Send Token"})})]})})})}),k?Object(a.jsx)("div",{className:"error",children:k}):Object(a.jsx)("div",{className:"success",children:N})]})},Q=i.useEffect,X=i.useState;var Y=function(){var e=X(!1),t=Object(d.a)(e,2),n=t[0],i=t[1],s=function(e){i(e)},r=Object(y.b)();return Q((function(){var e=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.login(t);case 3:(n=O.getWallet())&&(r(T({username:null===n||void 0===n||null===(a=n.auth)||void 0===a?void 0:a.accountName})),s(!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("something went wrong ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t=localStorage.getItem("walletType");if(t){var n=parseInt(t);n>=0&&e(n)}}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)(R,{toggleLogin:s}),Object(a.jsx)(q,{}),Object(a.jsx)(K,{loggedIn:n})]})},Z=n(131),$=n(19),ee={ethWalletConnected:!1,address:""},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ETHLOGIN":return Object($.a)(Object($.a)({},e),{},{ethWalletConnected:!0,address:t.address});default:return e}},ne={walletConnected:!1,username:""},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object($.a)(Object($.a)({},e),{},{walletConnected:!0,username:t.username});case"LOGOUT":return Object($.a)(Object($.a)({},e),{},{walletConnected:!1,username:""});default:return e}},ie=Object(Z.b)({user:ae,address:te}),se=Object(Z.c)(ie);o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(y.a,{store:se,children:Object(a.jsx)(Y,{})})}),document.getElementById("root")),c()}},[[736,1,2]]]);
//# sourceMappingURL=main.69e8baba.chunk.js.map