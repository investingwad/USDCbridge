(this["webpackJsonpusdc-stake"]=this["webpackJsonpusdc-stake"]||[]).push([[0],{377:function(e,t,n){},402:function(e,t){},406:function(e,t){},408:function(e,t){},417:function(e,t){},419:function(e,t){},510:function(e,t){},625:function(e,t){},630:function(e,t){},632:function(e,t){},639:function(e,t){},652:function(e,t){},779:function(e,t){},783:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),s=n.n(r),c=n(154),i=n.n(c),o=(n(377),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,790)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))}),u=n(2),l=n.n(u),d=n(7),p=n(12),b=n(25),h=n(6),j=n(9),m=n(360),f=n(361),x=n.n(f),v=n(362),O=n.n(v),y="accounts",g="acceptedsym",k="configset",w="feesettings",S="dadusdbridge",T="dadusdtokens",N="eosio.token",C="https://eos.greymass.com",E="https",A="dsp1tlv.dappsolutions.app",M=443,W="aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906",D="transfer",I="registereth",U="modethadress",F="setgasprice",P="setethprice",H="seteosprice",L="https://docs.google.com/document/u/1/d/14K6_DT-pqmBsAd3tLoHD-SKhPO1WCFW7unMKTMzxKx4/edit?usp=sharing",_="https://docs.google.com/document/d/1peh47G369IqMjHkA3FptsODB5kRNN0DBSc17GNvzX1Q/edit?usp=sharing",q=new(function(){function e(){Object(h.a)(this,e),this.accessContext=Object(m.initAccessContext)({appName:"bridge_app",network:{protocol:E,host:A,port:M,chainId:W},walletProviders:[x()(),O()(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15))]}),this.wallet=void 0}return Object(j.a)(e,[{key:"login",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.accessContext.getWalletProviders(),a=n[t],r=this.accessContext.initWallet(a),this.wallet=r,e.next=6,r.connect();case 6:return e.next=8,r.login();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWallet",value:function(){return this.wallet}},{key:"disconnectWallet",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.wallet){e.next=4;break}return e.next=3,this.wallet.terminate();case 3:this.wallet=void 0;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),B=function(e){return{type:"LOGIN",username:e.username}},G=n(228),R=n(22),z=n(38),V=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenSymbol",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!1,inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"allocateTo",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"src",type:"address"},{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],J="0x151982ebf8fbbb8979167b64b729f5f5c43562db",K=new G(G.givenProvider),Q=z.b().shape({value:z.a().required("Enter value of token").test("lowAmount","Should be greater than 0",(function(e){return parseFloat(e)>0})),token:z.c().required("Select a token type")}),X={value:"",token:"USDC"},Y=new K.eth.Contract(V,"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"),Z=new K.eth.Contract(V,"0x6b175474e89094c44da98b954eedeac495271d0f"),$=new K.eth.Contract([{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Failure",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Receipt",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"bytes",name:"reason",type:"bytes"}],name:"Refund",type:"event"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bytes",name:"_message",type:"bytes"}],name:"pushInboundMessage",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive",payable:!0},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"sendToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimGas",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function",payable:!0}],J),ee=function(){Object(b.c)((function(e){return e.user.walletConnected}));var e=Object(b.c)((function(e){return e.address.address})),t=(Object(b.c)((function(e){return e.address.ethWalletConnected})),Object(r.useState)("")),n=Object(p.a)(t,2),s=n[0],c=n[1],i=Object(r.useState)(!1),o=Object(p.a)(i,2),u=o[0],h=o[1],j=Object(r.useState)(""),m=Object(p.a)(j,2),f=m[0],x=m[1],v=Object(r.useState)(""),O=Object(p.a)(v,2),y=O[0],g=O[1],k=Object(r.useState)(""),w=Object(p.a)(k,2),S=w[0],T=w[1],N=function(){var t=Object(d.a)(l.a.mark((function t(n,a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:$.methods.sendToken(n,a).send({from:e}).on("transactionHash",(function(e){console.log("transactionHash  sendToken",e)})).on("receipt",(function(e){console.log("receipt sendToken",e),c(!1),g(e.transactionHash)})).on("confirmation",(function(e,t){console.log("confirmationNumber sendToken",e),console.log("receipt sendToken",t)})).on("error",(function(e){console.log("error sendToken",e),c(!1),x(e.message)}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),C=function(){var t=Object(d.a)(l.a.mark((function t(n,a,r){var s,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("inside approve and send token"),c(!0),s="USDC"===r?Y:Z,i="",i=u?"USDC"===r?K.utils.toWei("10000000000000000","mwei"):K.utils.toWei("10000000000000000","ether"):n,console.log("approved amount ",i),s.methods.approve(J,i).send({from:e}).on("transactionHash",(function(e){console.log("transactionHash approve ",e)})).on("receipt",(function(e){console.log("receipt approve",e),T(e.transactionHash)})).on("confirmation",(function(e,t){console.log("confirmationNumber approve",e),console.log("receipt approve",t)})).on("error",(function(e){console.log("error approve",e),c(!1),x(e.message)})).then((function(){$.methods.sendToken(n,a).send({from:e}).on("transactionHash",(function(e){console.log("transactionHash  sendToken",e)})).on("receipt",(function(e){console.log("receipt sendToken",e),c(!1),g(e.transactionHash)})).on("confirmation",(function(e,t){console.log("confirmationNumber sendToken",e),console.log("receipt sendToken",t)})).on("error",(function(e){console.log("error sendToken",e),c(!1),x(e.message)}))}));case 7:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),E=function(){var t=Object(d.a)(l.a.mark((function t(n){var a,r,s,c,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("values ",n),e){t.next=4;break}return alert("Please connect to metamask first"),t.abrupt("return");case 4:return a=n.value,r=n.token,console.log("value ",a),s="USDC"===r?0:1,c="USDC"===r?Y:Z,i="USDC"===r?K.utils.toWei(a,"mwei"):K.utils.toWei(a,"ether"),console.log("stakeAMount ",i),t.next=12,c.methods.allowance(e,J).call();case 12:o=t.sent,console.log("approvedAmount in contract ",o),o>i?N(i,s):C(i,s,r);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){f&&x(""),y&&g(""),S&&T("")};return console.log("checked ",u),Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"4. Send Tokens Ethereum to EOS"}),Object(a.jsx)("div",{className:"login",children:Object(a.jsx)("div",{className:"tokenform",children:Object(a.jsx)(R.d,{initialValues:X,validationSchema:Q,onSubmit:E,children:Object(a.jsxs)(R.c,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(R.b,{name:"value",placeholder:"enter amount"})}),Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{name:"value"})}),Object(a.jsx)("div",{children:Object(a.jsxs)(R.b,{as:"select",name:"token",children:[Object(a.jsx)("option",{value:"USDC",children:"USDC"}),Object(a.jsx)("option",{value:"DAI",children:"DAI"})]})}),Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{name:"token"})}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:u,onChange:function(){return h(!u)},disabled:s}),Object(a.jsx)("span",{children:"Infinite Approval"})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",className:"submit-btn",disabled:s,children:s?"Sending Token":"Send Token"})})]})})})}),Object(a.jsx)("a",{href:L,target:"_blank",rel:"noreferrer",children:"Click here for help"}),f?Object(a.jsxs)("div",{className:"errorMsg",children:[Object(a.jsx)("div",{className:"close",onClick:A,children:"x"}),Object(a.jsx)("div",{className:"errmsg",children:"Error"}),Object(a.jsx)("p",{className:"error",children:f})]}):y?Object(a.jsxs)("div",{className:"successMsg",children:[Object(a.jsx)("div",{className:"close",onClick:A,children:"x"}),Object(a.jsx)("div",{className:"msg",children:"Success"}),S?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{className:"para",children:["Check approved trx :",Object(a.jsx)("a",{href:"https://etherscan.io/tx/".concat(S),className:"link",children:S})]}),Object(a.jsxs)("p",{className:"para",children:["Check deposit trx :",Object(a.jsx)("a",{href:y,className:"link",children:y})]})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:"Check transaction :"}),Object(a.jsx)("a",{href:"https://etherscan.io/tx/".concat(y),className:"link",children:y})]})]}):null]})},te=function(e){var t=e.children,n=e.show;return Object(a.jsx)(a.Fragment,{children:n?Object(a.jsx)("div",{className:"modalcontainer",children:t}):null})},ne=r.useState,ae=function(e){var t=e.closeModal,n=e.toggleLogin,r=Object(b.b)(),s=ne(!1),c=Object(p.a)(s,2),i=c[0],o=c[1],u=ne(-1),h=Object(p.a)(u,2),j=h[0],m=h[1],f=function(){var e=Object(d.a)(l.a.mark((function e(a){var s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(a),o(!0),e.next=5,q.login(a);case 5:c=q.getWallet(),r(B({username:null===c||void 0===c||null===(s=c.auth)||void 0===s?void 0:s.accountName})),n(!0),localStorage.setItem("walletType",a.toString()),console.log("wallet11-----",c),t(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("something went wrong ",e.t0);case 16:return e.prev=16,o(!1),m(-1),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[0,13,16,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("div",{children:["Connect wallet",Object(a.jsx)("div",{className:"closeBtn",onClick:t,children:Object(a.jsx)("p",{className:"close-text",children:"close"})})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){return f(0)},disabled:i,children:i&&0===j?"connecting":"Connect with scatter"})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){return f(1)},disabled:i,children:i&&1===j?"connecting":"Connect with Anchor"})})]})},re=n(137),se=(n(124),n(164)),ce=n.n(se),ie=n(229),oe=n(754),ue=n(757),le=z.b().shape({newaddress:z.c().required("Enter new ethereum address").test("ethereumaddress","Invalid ethereum address",(function(e){return oe.isAddress(e)}))}),de={newaddress:""},pe={httpEndpoint:C},be=ce()(pe),he=function(e){var t=Object(b.c)((function(e){return e.user.username})),n=Object(b.c)((function(e){return e.user.walletConnected})),s=Object(b.c)((function(e){return e.address.ethWalletConnected})),c=Object(b.b)(),i=Object(r.useState)(!1),o=Object(p.a)(i,2),u=o[0],h=o[1],j=Object(r.useState)(!1),m=Object(p.a)(j,2),f=m[0],x=m[1],v=Object(r.useState)(!1),O=Object(p.a)(v,2),y=O[0],g=O[1],w=Object(r.useState)(!1),T=Object(p.a)(w,2),E=T[0],A=T[1],M=Object(r.useState)(!1),W=Object(p.a)(M,2),L=W[0],B=W[1],G=Object(r.useState)(!1),V=Object(p.a)(G,2),J=V[0],K=V[1],Q=Object(r.useState)(""),X=Object(p.a)(Q,2),Y=X[0],Z=X[1],$=Object(r.useState)(""),ee=Object(p.a)($,2),ne=ee[0],se=ee[1],ce=Object(r.useState)(""),pe=Object(p.a)(ce,2),he=pe[0],je=pe[1],me=Object(r.useState)(""),fe=Object(p.a)(me,2),xe=fe[0],ve=fe[1],Oe=Object(r.useState)(""),ye=Object(p.a)(Oe,2),ge=ye[0],ke=ye[1],we=Object(r.useState)(""),Se=Object(p.a)(we,2),Te=Se[0],Ne=Se[1],Ce=Object(r.useState)(""),Ee=Object(p.a)(Ce,2),Ae=Ee[0],Me=Ee[1],We=Object(r.useState)("0.0000 EOS"),De=Object(p.a)(We,2),Ie=De[0],Ue=De[1],Fe=z.b().shape({address:z.c().required("Enter ethereum address").test("ethereumaddress","Invalid ethereum address",(function(e){return oe.isAddress(e)}))}),Pe={address:Ae};Object(r.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.getTableRows({code:S,scope:S,table:k,json:"true"});case 2:if(!(t=e.sent).rows.length){e.next=8;break}return e.next=6,t.rows[0].registrationfee;case 6:n=e.sent,Ue(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var He=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=16;break}if(t.prev=1,!q.getWallet()){t.next=9;break}return t.next=6,q.disconnectWallet();case 6:c({type:"LOGOUT"}),localStorage.clear(),e.toggleLogin(!1);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log("something went wrong ",t.t0);case 14:t.next=17;break;case 16:h(!0);case 17:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(){return t.apply(this,arguments)}}(),Le=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,r,c,i,o,u,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=0,e.prev=1,1,r=q.getWallet(),c=t.address,n){e.next=9;break}Z("Eos wallet is not connected"),e.next=36;break;case 9:if(s){e.next=13;break}Z("Ethereum wallet is not connected"),e.next=36;break;case 13:if(!r){e.next=35;break}return x(!0),e.next=17,r.eosApi.transact({actions:[{account:N,name:D,authorization:[{actor:r.auth.accountName,permission:r.auth.permission}],data:{from:r.auth.accountName,to:S,quantity:Ie,memo:"registration fees"}},{account:S,name:I,authorization:[{actor:r.auth.accountName,permission:r.auth.permission}],data:{account:r.auth.accountName,ethaddress:c}}]},{broadcast:!1,blocksBehind:3,expireSeconds:60});case 17:return o=e.sent,console.log("result----",o),u="",e.prev=20,p=new re.Api({rpc:new re.JsonRpc(C,{fetch:ue}),signatureProvider:r.eosApi.signatureProvider}),e.next=24,p.pushSignedTransaction(o);case 24:return e.next=26,ie(function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n<4)){e.next=5;break}return e.next=3,p.pushSignedTransaction(o);case 3:e.next=15;break;case 5:return e.prev=5,e.next=8,p.pushSignedTransaction(o);case 8:i=e.sent,u=i,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),u=e.t0.message;case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}(),{retries:3});case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(20),Z(e.t0.message),x(!1);case 32:u&&(console.log("retrycount---",a),console.log("error--",u),u.includes("Account already registered. call update method to update ethaddress")||u.includes("duplicate transaction")||u.includes("key already exists")?(x(!1),Ne("Transaction Success"),Z("")):(Z(u),x(!1))),e.next=36;break;case 35:x(!1);case 36:e.next=42;break;case 38:e.prev=38,e.t1=e.catch(1),Z(e.t1.message),x(!1);case 42:return e.prev=42,x(!1),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[1,38,42,45],[20,28]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,r,c,i,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=q.getWallet(),r=t.newaddress,n){e.next=7;break}se("Eos wallet is not connected"),e.next=34;break;case 7:if(s){e.next=11;break}se("Ethereum wallet is not connected"),e.next=34;break;case 11:if(!a){e.next=33;break}return g(!0),e.next=15,a.eosApi.transact({actions:[{account:N,name:D,authorization:[{actor:a.auth.accountName,permission:a.auth.permission}],data:{from:a.auth.accountName,to:S,quantity:Ie,memo:"modification fees"}},{account:S,name:U,authorization:[{actor:a.auth.accountName,permission:a.auth.permission}],data:{account:a.auth.accountName,newethaddress:r}}]},{broadcast:!1,blocksBehind:3,expireSeconds:60});case 15:return i=e.sent,console.log("result----",i),o="",e.prev=18,u=new re.Api({rpc:new re.JsonRpc(C,{fetch:ue}),signatureProvider:a.eosApi.signatureProvider}),e.next=22,u.pushSignedTransaction(i);case 22:return e.next=24,ie(function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n<4)){e.next=5;break}return e.next=3,u.pushSignedTransaction(i);case 3:e.next=15;break;case 5:return e.prev=5,e.next=8,u.pushSignedTransaction(i);case 8:c=e.sent,o=c,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),o=e.t0.message;case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}(),{retries:3});case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(18),se(e.t0.message),g(!1);case 30:o&&(console.log("error--",o),o.includes("Account already registered. call update method to update ethaddress")||o.includes("duplicate transaction")||o.includes("key already exists")?(g(!1),je("Transaction Success"),se("")):(se(o),g(!1))),e.next=34;break;case 33:g(!1);case 34:e.next=40;break;case 36:e.prev=36,e.t1=e.catch(0),se(e.t1.message),g(!1);case 40:return e.prev=40,g(!1),e.finish(40);case 43:case"end":return e.stop()}}),e,null,[[0,36,40,43],[18,26]])})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=q.getWallet(),n){e.next=6;break}ve("Eos wallet is not connected"),e.next=17;break;case 6:if(s){e.next=10;break}ve("Ethereum wallet is not connected"),e.next=17;break;case 10:if(!t){e.next=17;break}return console.log("wallet---",t),A(!0),e.next=15,t.eosApi.transact({actions:[{account:S,name:F,authorization:[{actor:t.auth.accountName,permission:t.auth.permission}],data:{}}]},{broadcast:!1,blocksBehind:3,expireSeconds:60});case 15:e.sent&&(A(!1),ke("Transaction Success"),ve(""));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),A(!1);case 22:return e.prev=22,A(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[0,19,22,25]])})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=q.getWallet(),n){e.next=6;break}ve("Eos wallet is not connected"),e.next=16;break;case 6:if(s){e.next=10;break}ve("Ethereum wallet is not connected"),e.next=16;break;case 10:if(!t){e.next=16;break}return B(!0),e.next=14,t.eosApi.transact({actions:[{account:S,name:P,authorization:[{actor:t.auth.accountName,permission:t.auth.permission}],data:{}}]},{broadcast:!0,blocksBehind:3,expireSeconds:60});case 14:e.sent&&(B(!1),ke("Transaction Success"),ve(""));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),B(!1);case 21:return e.prev=21,B(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=q.getWallet(),n){e.next=6;break}ve("Eos wallet is not connected"),e.next=16;break;case 6:if(s){e.next=10;break}ve("Ethereum wallet is not connected"),e.next=16;break;case 10:if(!t){e.next=16;break}return K(!0),e.next=14,t.eosApi.transact({actions:[{account:S,name:H,authorization:[{actor:t.auth.accountName,permission:t.auth.permission}],data:{}}]},{broadcast:!0,blocksBehind:3,expireSeconds:60});case 14:e.sent&&(K(!1),ke("Transaction Success"),se(""));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),K(!1);case 21:return e.prev=21,K(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,n=t.ethereum,"0x1"!==n.chainId){e.next=12;break}if(!n){e.next=10;break}return e.next=7,n.request({method:"eth_requestAccounts"});case 7:a=e.sent,Me(a[0]),c({type:"ETHLOGIN",address:{address:a[0]}.address});case 10:e.next=13;break;case 12:alert("Please select Ethereum Main Network (Mainnet) then connect");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("something went wrong ",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"1. Register Ethereum Address on EOS"}),Object(a.jsxs)("div",{className:"login",children:[Object(a.jsx)("button",{className:"loginbtn",onClick:He,children:n?"Logout From ".concat(t):"Connect to Eos Wallet"}),Object(a.jsx)("button",{onClick:Re,children:Ae?"Connected":"Connect to metamask"}),Object(a.jsx)("div",{className:"register",children:Object(a.jsx)(R.d,{initialValues:Pe,validationSchema:Fe,onSubmit:Le,children:function(e){var t=e.setFieldValue;return Object(a.jsxs)(R.c,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(R.b,{name:"address",placeholder:"enter ethereum address",onClick:function(){return t("address",Ae)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{name:"address",className:"error"})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"note",children:["Note:- Current registration fee ",Ie," will be deducted from your account."]}),Object(a.jsx)("button",{type:"submit",className:"sendbtn",disabled:f,children:f?"registering":"Register"})]})]})}})})]}),Object(a.jsx)("a",{href:_,target:"_blank",rel:"noreferrer",children:"Click here for help"}),Y?Object(a.jsx)("div",{className:"error",children:Y}):Object(a.jsx)("div",{className:"success",children:Te}),u?Object(a.jsx)(te,{show:u,children:Object(a.jsx)(ae,{closeModal:function(){h(!1)},toggleLogin:e.toggleLogin})}):null]}),Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"2. Update Prices (Ethereum Gas, EOS, ETH) "}),Object(a.jsx)("div",{className:"login",children:Object(a.jsxs)("div",{className:"register",children:[Object(a.jsx)("button",{className:"pricebtn",disabled:E,onClick:qe,children:E?"updating":"Update GAS Price"}),Object(a.jsx)("button",{className:"pricebtn",disabled:L,onClick:Be,children:L?"updating":"Update ETH Price"}),Object(a.jsx)("button",{className:"pricebtn",disabled:J,onClick:Ge,children:J?"updating":"Update EOS Price"})]})}),xe?Object(a.jsx)("div",{className:"error",children:xe}):Object(a.jsx)("div",{className:"success",children:ge})]}),Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"3. Modify Ethereum Address on EOS"}),Object(a.jsx)("div",{className:"login",children:Object(a.jsx)("div",{className:"register",children:Object(a.jsx)(R.d,{initialValues:de,validationSchema:le,onSubmit:_e,children:function(e){var t=e.setFieldValue;return Object(a.jsxs)(R.c,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(R.b,{name:"newaddress",placeholder:"enter new ethereum address",onClick:function(){return t("newaddress",Ae)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{name:"newaddress",className:"error"})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"note",children:["Note:- Current modification fee ",Ie," will be deducted from your account."]}),Object(a.jsx)("button",{type:"submit",className:"sendbtn",disabled:y,children:y?"updating":"Update Address"})]})]})}})})}),ne?Object(a.jsx)("div",{className:"error",children:ne}):Object(a.jsx)("div",{className:"success",children:he})]})]})},je=n(57),me={httpEndpoint:C},fe=ce()(me),xe=z.b().shape({value:z.a().required("Enter value of token").test("lowAmount","Should be greater than 0",(function(e){return parseFloat(e)>0})),token:z.c().required("Select a token type")}),ve={value:"",token:"6,USDC"},Oe=function(e){var t=Object(b.c)((function(e){return e.user.username})),n=Object(b.c)((function(e){return e.user.walletConnected})),s=Object(b.c)((function(e){return e.address.ethWalletConnected})),c=Object(r.useState)([]),i=Object(p.a)(c,2),o=i[0],u=i[1],h=Object(r.useState)(["4,USDC"]),j=Object(p.a)(h,2),m=(j[0],j[1]),f=Object(r.useState)(!1),x=Object(p.a)(f,2),v=x[0],O=x[1],k=Object(r.useState)(""),N=Object(p.a)(k,2),E=N[0],A=N[1],M=Object(r.useState)(""),W=Object(p.a)(M,2),I=W[0],U=W[1],F=Object(r.useState)("0.000000 USDC"),P=Object(p.a)(F,2),H=P[0],L=P[1],_=Object(r.useState)("0.000000 DAI"),B=Object(p.a)(_,2),G=B[0],z=B[1],V=e.loggedIn,J=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fe.getTableRows({code:S,scope:S,table:g,json:"true"});case 3:return(n=e.sent).rows.length&&n.rows.map((function(e){t.push(e.dtoken.toString())})),m(t),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],e.prev=1,!t.length){e.next=20;break}r=Object(je.a)(t),e.prev=4,c=l.a.mark((function e(){var t,r,c,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.value,void 0,r={code:T,json:!0,limit:1e3,scope:n,table:y,table_key:n},e.next=6,fetch("".concat(C,"/v1/chain/get_table_rows"),{method:"post",body:JSON.stringify(r)});case 6:return c=e.sent,e.next=9,c.json();case 9:(i=e.sent).rows.length&&(o=i.rows.find((function(e){return e.balance.split(" ")[1]==t.split(",")[1]})),a.push(o.balance));case 11:case"end":return e.stop()}}),e)})),r.s();case 7:if((s=r.n()).done){e.next=11;break}return e.delegateYield(c(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),r.e(e.t1);case 16:return e.prev=16,r.f(),e.finish(16);case 19:u(a);case 20:e.next=25;break;case 22:e.prev=22,e.t2=e.catch(1),u(a);case 25:case"end":return e.stop()}}),e,null,[[1,22],[4,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.getTableRows({code:S,scope:"USDC",table:w,json:"true"});case 2:return t=e.sent,e.next=5,fe.getTableRows({code:S,scope:"DAI",table:w,json:"true"});case 5:if(n=e.sent,!t.rows.length){e.next=11;break}return e.next=9,t.rows[0].minfeewithdraw;case 9:a=e.sent,L(a);case 11:if(!n.rows.length){e.next=16;break}return e.next=14,n.rows[0].minfeewithdraw;case 14:r=e.sent,z(r);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){J(),V&&function(){var e=Object(d.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:if(a=e.sent,!n||!a.length){e.next=6;break}return e.next=6,K(a,t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),V||u([])}),[V]);var Q=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,r,c,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.value,r=t.token,console.log("value",a,"token",r),c=q.getWallet(),n){e.next=8;break}A("Eos wallet is not connected"),e.next=23;break;case 8:if(s){e.next=12;break}A("Ethereum wallet is not connected"),e.next=23;break;case 12:if(!c){e.next=22;break}return O(!0),i=T,o=S,e.next=18,c.eosApi.transact({actions:[{account:i,name:D,authorization:[{actor:c.auth.accountName,permission:c.auth.permission}],data:{from:c.auth.accountName,to:o,quantity:"".concat(parseFloat(a).toFixed(parseFloat(r.split(",")[0]))," ").concat(r.split(",")[1]," "),memo:"Transfer ".concat(r.split(",")[1]," token")}}]},{broadcast:!0,blocksBehind:3,expireSeconds:60});case 18:e.sent&&(O(!1),U("Transaction Success"),A("")),e.next=23;break;case 22:O(!1);case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(0),A(e.t0.message),O(!1);case 29:return e.prev=29,O(!1),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[0,25,29,32]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsx)("div",{children:"5. Send Tokens EOS to Ethereum"}),Object(a.jsx)("div",{className:"login",children:Object(a.jsx)("div",{className:"register",children:Object(a.jsx)(R.d,{initialValues:ve,validationSchema:xe,onSubmit:Q,children:Object(a.jsxs)(R.c,{children:[o.map((function(e){return Object(a.jsx)("div",{className:"userbalance",children:e})})),Object(a.jsx)("div",{children:Object(a.jsx)(R.b,{name:"value",placeholder:"enter amount"})}),Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{name:"value",className:"error"})}),Object(a.jsx)("div",{children:Object(a.jsxs)(R.b,{as:"select",name:"token",children:[Object(a.jsx)("option",{value:"6,USDC",children:"USDC"}),Object(a.jsx)("option",{value:"6,DAI",children:"DAI"})]})}),Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{name:"token",className:"error"})}),Object(a.jsxs)("div",{className:"notefee",children:["Note: Current withdraw fee is ",H," and ",G," set"]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",className:"registerbtn",disabled:v,children:v?"Sending Token":"Send Token"})})]})})})}),E?Object(a.jsx)("div",{className:"error",children:E}):Object(a.jsx)("div",{className:"success",children:I})]})},ye=r.useEffect,ge=r.useState;var ke=function(){var e=ge(!1),t=Object(p.a)(e,2),n=t[0],r=t[1],s=function(e){r(e)},c=Object(b.b)();return ye((function(){var e=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.login(t);case 3:(n=q.getWallet())&&(c(B({username:null===n||void 0===n||null===(a=n.auth)||void 0===a?void 0:a.accountName})),s(!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("something went wrong ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t=localStorage.getItem("walletType");if(t){var n=parseInt(t);n>=0&&e(n)}}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)(he,{toggleLogin:s}),Object(a.jsx)(ee,{}),Object(a.jsx)(Oe,{loggedIn:n})]})},we=n(135),Se=n(19),Te={ethWalletConnected:!1,address:""},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ETHLOGIN":return Object(Se.a)(Object(Se.a)({},e),{},{ethWalletConnected:!0,address:t.address});default:return e}},Ce={walletConnected:!1,username:""},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(Se.a)(Object(Se.a)({},e),{},{walletConnected:!0,username:t.username});case"LOGOUT":return Object(Se.a)(Object(Se.a)({},e),{},{walletConnected:!1,username:""});default:return e}},Ae=Object(we.b)({user:Ee,address:Ne}),Me=Object(we.c)(Ae);i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(b.a,{store:Me,children:Object(a.jsx)(ke,{})})}),document.getElementById("root")),o()}},[[783,1,2]]]);
//# sourceMappingURL=main.ab6b557f.chunk.js.map